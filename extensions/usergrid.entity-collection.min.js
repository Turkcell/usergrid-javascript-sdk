(function(){Usergrid.Entity=function(b,a){this._collectionType=b;this._data={};if(a){this._data.uuid=a}};Usergrid.Entity.prototype=new Usergrid.Query();Usergrid.Entity.prototype.getCollectionType=function(){return this._collectionType};Usergrid.Entity.prototype.setCollectionType=function(a){this._collectionType=a};Usergrid.Entity.prototype.get=function(a){if(a){return this._data[a]}else{return this._data}},Usergrid.Entity.prototype.set=function(a,b){if(typeof a==="object"){for(var c in a){this._data[c]=a[c]}}else{if(typeof a==="string"){if(b===null){delete this._data[a]}else{this._data[a]=b}}else{this._data=null}}};Usergrid.Entity.prototype.save=function(c,f){var i=this.getCollectionType();var a="POST";if(this.isUUID(this.get("uuid"))){a="PUT";i+="/"+this.get("uuid")}var d={};if(i=="users"){d=this.get();var e={};if(d.oldpassword&&d.newpassword){e.oldpassword=d.oldpassword;e.newpassword=d.newpassword;this.runAppQuery(new Usergrid.Query("PUT","users/"+uuid+"/password",e,null,function(j){},function(j){}))}delete d.oldpassword;delete d.newpassword}var h=this;d={};var b=this.get();for(var g in b){if(g=="metadata"||g=="created"||g=="modified"||g=="type"||g=="activatted"){continue}d[g]=b[g]}this.setAllQueryParams(a,i,d,null,function(k){try{var j=k.entities[0];h.set(j);if(typeof(c)==="function"){c(k)}}catch(l){if(typeof(f)==="function"){f(k)}}},function(j){if(typeof(f)==="function"){f(j)}});Usergrid.ApiClient.runAppQuery(this)};Usergrid.Entity.prototype.fetch=function(a,c){var d=this.getCollectionType();if(this.isUUID(this.get("uuid"))){d+="/"+this.get("uuid")}else{if(d=="users"){if(this.get("username")){d+="/"+this.get("username")}else{console.log("no username specified");if(typeof(c)==="function"){console.log("no username specified")}}}else{if(this.get()){d+="/"+this.get()}else{console.log("no entity identifier specified");if(typeof(c)==="function"){console.log("no entity identifier specified")}}}}var b=this;this.setAllQueryParams("GET",d,null,null,function(e){if(e.user){b.set(e.user)}else{if(e.entities[0]){b.set(e.entities[0])}}if(typeof(a)==="function"){a(e)}},function(e){if(typeof(c)==="function"){c(e)}});Usergrid.ApiClient.runAppQuery(this)};Usergrid.Entity.prototype.destroy=function(a,c){var d=this.getCollectionType();if(this.isUUID(this.get("uuid"))){d+="/"+this.get("uuid")}else{console.log("Error trying to delete object - no uuid specified.");if(typeof(c)==="function"){c("Error trying to delete object - no uuid specified.")}}var b=this;this.setAllQueryParams("DELETE",d,null,null,function(e){b.set(null);if(typeof(a)==="function"){a(e)}},function(e){if(typeof(c)==="function"){c(e)}});Usergrid.ApiClient.runAppQuery(this)}})(Usergrid);(function(){Usergrid.Collection=function(b,a){this._path=b;this._uuid=a;this._list=[];this._Query=new Usergrid.Query();this._iterator=-1};Usergrid.Collection.prototype=new Usergrid.Query();Usergrid.Collection.prototype.getPath=function(){return this._path};Usergrid.Collection.prototype.setPath=function(a){this._path=a};Usergrid.Collection.prototype.getUUID=function(){return this._uuid};Usergrid.Collection.prototype.setUUID=function(a){this._uuid=a};Usergrid.Collection.prototype.addEntity=function(a){var b=this._list.length;this._list[b]=a};Usergrid.Collection.prototype.addNewEntity=function(c,a,b){this.addEntity(c);c.save(a,b)};Usergrid.Collection.prototype.destroyEntity=function(a){var d=a.get("uuid");if(d){var e=this._list.length;var c=0;var b=false;for(c=0;c<e;c++){if(b){this._list[c-1]=this._list[c];this._list[c]=null}if(this._list[c].get("uuid")==d){this._list[c]=null;b=true}}}a.destroy()};Usergrid.Collection.prototype.getEntityByField=function(d,c){var b=this._list.length;var a=0;for(a=0;a<b;a++){if(this._list[a].getField(d)==c){return this._list[a]}}return null};Usergrid.Collection.prototype.getEntityByUUID=function(c){var b=this._list.length;var a=0;for(a=0;a<b;a++){if(this._list[a].get("uuid")==c){return this._list[a]}}return null};Usergrid.Collection.prototype.getFirstEntity=function(){var a=this._list.length;if(a>0){return this._list[0]}return null};Usergrid.Collection.prototype.getLastEntity=function(){var a=this._list.length;if(a>0){return this._list[a-1]}return null};Usergrid.Collection.prototype.hasNextEntity=function(){var a=this._iterator+1;if(a>=0&&a<this._list.length){return true}return false};Usergrid.Collection.prototype.getNextEntity=function(){this._iterator++;if(this._iterator>=0&&this._iterator<=this._list.length){return this._list[this._iterator]}return false};Usergrid.Collection.prototype.hasPreviousEntity=function(){var a=this._iterator-1;if(a>=0&&a<this._list.length){return true}return false};Usergrid.Collection.prototype.getPreviousEntity=function(){this._iterator--;if(this._iterator>=0&&this._iterator<=this._list.length){return this.list[this._iterator]}return false};Usergrid.Collection.prototype.resetEntityPointer=function(){this._iterator=-1};Usergrid.Collection.prototype.getEntityList=function(){return this._list};Usergrid.Collection.prototype.setEntityList=function(a){this._list=a};Usergrid.Collection.prototype.hasNextPage=function(){return this.hasNext()};Usergrid.Collection.prototype.getNextPage=function(){if(this.hasNext()){this.getNext();this.setEntityList([]);Usergrid.ApiClient.runAppQuery(this)}};Usergrid.Collection.prototype.hasPreviousPage=function(){return this.hasPrevious()};Usergrid.Collection.prototype.getPreviousPage=function(){if(this.hasPrevious()){this.getPrevious();this.setEntityList([]);Usergrid.ApiClient.runAppQuery(this)}};Usergrid.Collection.prototype.clearQuery=function(){this.clearAll()};Usergrid.Collection.prototype.fetch=function(a,c){var b=this;var d=this.getQueryParams();this.setEntityList([]);this.setAllQueryParams("GET",this.getPath(),null,d,function(f){if(f.entities){this.resetEntityPointer();var j=f.entities.length;for(var g=0;g<j;g++){var h=f.entities[g].uuid;if(h){var e=new Usergrid.Entity(b.getPath(),h);var k=f.entities[g]||{};delete k.uuid;e.set(k);b.addEntity(e)}}if(typeof(a)==="function"){a(f)}}else{if(typeof(c)==="function"){c(f)}}},function(e){if(typeof(c)==="function"){c(e)}});Usergrid.ApiClient.runAppQuery(this)};Usergrid.Collection.prototype.save=function(a,b){var e=this.getEntityList();var d=e.length;var f=[];for(var c=0;c<d;c++){entity=e[c];data=entity.get();if(entity.get("uuid")){data.uuid=entity.get("uuid");f.push(data)}entity.save()}this.setAllQueryParams("PUT",this.getPath(),f,null,a,b);Usergrid.ApiClient.runAppQuery(this)}})(Usergrid);